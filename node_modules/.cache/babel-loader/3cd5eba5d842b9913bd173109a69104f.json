{"ast":null,"code":"import _classCallCheck from \"/home/bourmeau/workspace/wildbattle/reims-0918-js-wild-battle/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bourmeau/workspace/wildbattle/reims-0918-js-wild-battle/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bourmeau/workspace/wildbattle/reims-0918-js-wild-battle/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bourmeau/workspace/wildbattle/reims-0918-js-wild-battle/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bourmeau/workspace/wildbattle/reims-0918-js-wild-battle/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/bourmeau/workspace/wildbattle/reims-0918-js-wild-battle/src/stats_section/RankingTable.js\";\nimport React, { Component, Fragment } from \"react\";\nimport BattleContext from \"../battle_context/BattleContext\";\nimport \"./RankingTable.css\";\nimport { Spring, Transition } from \"react-spring\";\n\nvar rank_sort = function rank_sort(history) {\n  return history.sort(function (person1, person2) {\n    return person2.win - person1.win;\n  });\n};\n\nexport var createRankingObject = function createRankingObject(history) {\n  var rankingObject = {};\n\n  for (var i = 0; i < history.length; i++) {\n    if (rankingObject[history[i].winner.nickname] === undefined) {\n      rankingObject[history[i].winner.nickname] = {\n        win: 1,\n        lose: 0\n      };\n    } else {\n      rankingObject[history[i].winner.nickname].win += 1;\n    }\n\n    if (rankingObject[history[i].loser.nickname] === undefined) {\n      rankingObject[history[i].loser.nickname] = {\n        win: 0,\n        lose: 1\n      };\n    } else {\n      rankingObject[history[i].loser.nickname].lose += 1;\n    }\n  }\n\n  return rankingObject;\n};\nexport var createRankingTable = function createRankingTable(history) {\n  var rankingTable = [];\n  var rankingObject = createRankingObject(history);\n  Object.keys(rankingObject).map(function (key, index) {\n    rankingTable.push({\n      name: key,\n      win: rankingObject[key].win,\n      lose: rankingObject[key].lose\n    });\n  });\n  return rankingTable;\n};\n\nvar RankingTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(RankingTable, _Component);\n\n  function RankingTable() {\n    _classCallCheck(this, RankingTable);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(RankingTable).apply(this, arguments));\n  }\n\n  _createClass(RankingTable, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(BattleContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, function (battleContext) {\n        return React.createElement(Fragment, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44\n          },\n          __self: this\n        }, battleContext.state.history.length > 0 && React.createElement(\"div\", {\n          className: \"ranking-table\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 46\n          },\n          __self: this\n        }, React.createElement(Spring, {\n          from: {\n            opacity: 0\n          },\n          to: {\n            opacity: 1\n          },\n          config: {\n            delay: 200\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 47\n          },\n          __self: this\n        }, function (props) {\n          return React.createElement(\"h2\", {\n            style: props,\n            className: \"text-center\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 53\n            },\n            __self: this\n          }, \"RANKING\");\n        }), React.createElement(\"table\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(\"tbody\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, React.createElement(Spring, {\n          from: {\n            opacity: 0,\n            transform: \"translate3d(0,-50px,0)\"\n          },\n          to: {\n            opacity: 1,\n            transform: \"translate3d(0,0,0)\"\n          },\n          config: {\n            delay: 200\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, function (props) {\n          return React.createElement(\"tr\", {\n            style: props,\n            className: \"table-head\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 66\n            },\n            __self: this\n          }, React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 67\n            },\n            __self: this\n          }, \"Rank\"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 68\n            },\n            __self: this\n          }, \"Player\"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 69\n            },\n            __self: this\n          }, \"Win\"), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 70\n            },\n            __self: this\n          }, \"Lose\"));\n        }), React.createElement(Transition, {\n          keys: rank_sort(createRankingTable(battleContext.state.history)).map(function (person, index) {\n            return index;\n          }),\n          from: {\n            opacity: 0,\n            transform: \"translate3d(0,-50px,0)\"\n          },\n          enter: {\n            opacity: 1,\n            transform: \"translate3d(0,0,0)\"\n          },\n          leave: {\n            opacity: 0,\n            scale: 0\n          },\n          delay: 300,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 74\n          },\n          __self: this\n        }, rank_sort(createRankingTable(battleContext.state.history)).map(function (person, index) {\n          return function (styles) {\n            return React.createElement(\"tr\", {\n              style: styles,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 89\n              },\n              __self: this\n            }, React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 90\n              },\n              __self: this\n            }, index + 1), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 91\n              },\n              __self: this\n            }, person.name), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 92\n              },\n              __self: this\n            }, person.win), React.createElement(\"td\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 93\n              },\n              __self: this\n            }, person.lose));\n          };\n        }))))));\n      });\n    }\n  }]);\n\n  return RankingTable;\n}(Component);\n\nexport default RankingTable;","map":{"version":3,"sources":["/home/bourmeau/workspace/wildbattle/reims-0918-js-wild-battle/src/stats_section/RankingTable.js"],"names":["React","Component","Fragment","BattleContext","Spring","Transition","rank_sort","history","sort","person1","person2","win","createRankingObject","rankingObject","i","length","winner","nickname","undefined","lose","loser","createRankingTable","rankingTable","Object","keys","map","key","index","push","name","RankingTable","battleContext","state","opacity","delay","props","transform","person","scale","styles"],"mappings":"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","sourcesContent":["import React, { Component, Fragment } from \"react\";\nimport BattleContext from \"../battle_context/BattleContext\";\nimport \"./RankingTable.css\";\nimport { Spring, Transition } from \"react-spring\";\n\nconst rank_sort = history =>\n  history.sort((person1, person2) => person2.win - person1.win);\n\nexport const createRankingObject = history => {\n  let rankingObject = {};\n  for (let i = 0; i < history.length; i++) {\n    if (rankingObject[history[i].winner.nickname] === undefined) {\n      rankingObject[history[i].winner.nickname] = { win: 1, lose: 0 };\n    } else {\n      rankingObject[history[i].winner.nickname].win += 1;\n    }\n    if (rankingObject[history[i].loser.nickname] === undefined) {\n      rankingObject[history[i].loser.nickname] = { win: 0, lose: 1 };\n    } else {\n      rankingObject[history[i].loser.nickname].lose += 1;\n    }\n  }\n  return rankingObject;\n};\n\nexport const createRankingTable = history => {\n  const rankingTable = [];\n  const rankingObject = createRankingObject(history);\n  Object.keys(rankingObject).map(function(key, index) {\n    rankingTable.push({\n      name: key,\n      win: rankingObject[key].win,\n      lose: rankingObject[key].lose\n    });\n  });\n  return rankingTable;\n};\n\nclass RankingTable extends Component {\n  render() {\n    return (\n      <BattleContext.Consumer>\n        {battleContext => (\n          <Fragment>\n            {battleContext.state.history.length > 0 && (\n              <div className=\"ranking-table\">\n                <Spring\n                  from={{ opacity: 0 }}\n                  to={{ opacity: 1 }}\n                  config={{ delay: 200 }}\n                >\n                  {props => (\n                    <h2 style={props} className=\"text-center\">\n                      RANKING\n                    </h2>\n                  )}\n                </Spring>\n                <table>\n                  <tbody>\n                    <Spring\n                      from={{ opacity: 0, transform: \"translate3d(0,-50px,0)\" }}\n                      to={{ opacity: 1, transform: \"translate3d(0,0,0)\" }}\n                      config={{ delay: 200 }}\n                    >\n                      {props => (\n                        <tr style={props} className=\"table-head\">\n                          <td>Rank</td>\n                          <td>Player</td>\n                          <td>Win</td>\n                          <td>Lose</td>\n                        </tr>\n                      )}\n                    </Spring>\n                    <Transition\n                      keys={rank_sort(\n                        createRankingTable(battleContext.state.history)\n                      ).map((person, index) => index)}\n                      from={{ opacity: 0, transform: \"translate3d(0,-50px,0)\" }}\n                      enter={{ opacity: 1, transform: \"translate3d(0,0,0)\" }}\n                      leave={{\n                        opacity: 0,\n                        scale: 0\n                      }}\n                      delay={300}\n                    >\n                      {rank_sort(\n                        createRankingTable(battleContext.state.history)\n                      ).map((person, index) => styles => (\n                        <tr style={styles}>\n                          <td>{index + 1}</td>\n                          <td>{person.name}</td>\n                          <td>{person.win}</td>\n                          <td>{person.lose}</td>\n                        </tr>\n                      ))}\n                    </Transition>\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </Fragment>\n        )}\n      </BattleContext.Consumer>\n    );\n  }\n}\n\nexport default RankingTable;\n"]},"metadata":{},"sourceType":"module"}